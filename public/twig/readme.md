# Создание нового шаблона для отдельной страницы или типа страниц

## php-контроллер

1. Дублировать заголовку php-контроллера в папке engine — `init.class.php` — и назвать ее согласно названию шаблона страницы: например, `about.class.php`. Или по типу страниц — например, `blogpost.class.php`.

2. Раскомментировать последнюю строку и заменить строку `new-template.twig` названием нового шаблона. Желательно, чтобы оно соответствовало названию контроллера. Если контроллер называется `about.class.php`, то и шаблон лучше назвать `about.twig`.

В параметре `get_template()` для типов страниц — надо указывать маску пути. Как это правильно делается, я уже подзабыл, надо порыться еще в старых сайтах.

## twig-шаблон

3. Дублировать в папке twig заготовку twig — `init.twig`. Назвать новый шаблон согласно параметру, переданному в `get_template()`. Например, `about.twig`.

4. Каждый шаблон наследует от базового шаблона `clean_page`. Он структурно состоит их блоков:

- config — для установки переменных страницы
- head — разметка раздела `<head>`
  - css — вложенный блок для основных стилей страницы.
- header — область глобальной шапки
- content — основное содержание
- footer — область глобального подвала
- body_suffix — разметка под подвалом, куда можно добавлять скрипты, разметки модалок и пр. дополнения.

4.1. Чтобы добавить что-то в тот или иной раздел, надо в  любом месте шаблона (но лучше все таки соблюдая последовательность в `clean_page`) создать экземпляр блока в таком синтаксисе

```twig
{% block название_блока %}
{{ parent() }}
<!--
  здесь добавлять новое содержание, которое будет ниже разметки
  блока в сlean_page
-->
{% endblock %}
```

Например, если нужно что-то добавить в head, добавляй в одноименный блок:

```twig
{% block head %}
{{ parent() }}
<script src="/js/md5.js"></script>
{% endblock %}
```

А если нужно добавить только стили, добавляй в блок css:

```twig
{% block css %}
{{ parent() }}
<link rel="stylesheet" href="/bootstrap.css">
{% endblock %}
```

Так вниз разметки `head` будет добавлен новый скрипт или стили.

Вызов `{{ parent() }}` сохраняет исходный код. Чтобы поменять добавление и исходный код местами, нужно просто вызвать `{{ parent() }}` ниже.

4.2. Чтобы полностью переопределить разметку какого-то блока, надо в его экземпляре в шаблоне добавить содержание без вызова `{{ parent() }}`. Например.

```twig
{% block content %}
  <h2>Aww it's soooo sweet</h2>
{% endblock %}
```

4.3. Чтобы удалить какой-то блок из `clean_page`, надо добавить его пустой экземпляр. Например.

```twig
{% block footer %}{% endblock %}
```

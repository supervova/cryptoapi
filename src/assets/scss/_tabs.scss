@use 'abstracts' as *;

.e-tabs {
  --panel-height: auto;

  display: flex;
  flex-direction: column;

  // Hide non active slides in row. The content scrolls within the panels.
  overflow: hidden;
  position: relative;
}

// -----------------------------------------------------------------------------
// BUTTONS
// -----------------------------------------------------------------------------

.e-tabs-nav,
[role='tablist'] {
  --tabs-background: var(--color-bg-02);

  background-color: var(--tabs-background);
  border-radius: calc(var(--radius-sm) + rem(4));
  display: flex;
  flex: none;
  list-style: none;
  gap: var(--dim-0p5);
  padding: var(--dim-0p5);

  > li {
    padding: 0;
  }

  @media (--tablet) {
    .e-main__header & {
      translate: 0 rem(-4);
    }
  }
}

/* База для .e-tabs / .e-tabs-nav */
:where(.e-tabs, .e-tabs-nav) [role='tab'] {

  --button-height: var(--dim-4);

  background: transparent;
  border-radius: var(--radius-sm);
  color: var(--color-text-03);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  flex-shrink: 0;
  gap: var(--button-gap, var(--dim-1p5));
  justify-content: center;
  font-size: var(--button-font-size, var(--font-size-body-sm));
  font-weight: var(--button-font-weight, 500);
  text-align: center;
  text-decoration: none;
  white-space: nowrap;
  padding: 0 var(--dim-1p5);
  scroll-snap-align: start;
  touch-action: manipulation;
  user-select: none;
  max-width: 100%;
  min-width: 0;
  height: var(--button-height);

  &:focus-visible {
    outline: 2px solid color-mix(in oklch, currentColor 40%, transparent);
    outline-offset: 2px;
  }

  @media (any-hover: hover) {
    &:hover {
      background: var(--color-fill);
      color: var(--color-text-02);
    }
  }

  @media (--phone-l) {
    padding-inline: var(--dim-2);
  }
}

.active [role='tab'],
[role='tab'][aria-selected='true'] {
  background: hsl(var(--h-green) var(--s) 83% / 0.08);
  color: var(--color-text-02);
  cursor: default;
  pointer-events: none;
}

.e-tabs-nav__item {
  position: relative;
}

.e-tabs-nav__item:not(
  .e-tabs-nav__item:first-child,
  .e-tabs-nav__item.is-active,
  .e-tabs-nav__item.active,
  .e-tabs-nav__item[aria-selected='true'],
  .e-tabs-nav__item:hover + .e-tabs-nav__item,
  .active + .e-tabs-nav__item,
  [aria-selected='true'] + .e-tabs-nav__item
) {
  &::before {
    border-inline-start: 1px solid var(--color-border);
    content: '';
    width: 0;
    height: calc(100% - var(--dim-1));
    position: absolute;
    top: 50%;
    inset-inline-start: rem(-2);
    transform: translateY(-50%);
    transition: border-inline-start-color var(--duration-100) var(--easing-base);
  }

  &:hover::before {
    border-inline-start-color: transparent;
  }
}

// Panes container
.e-tabs__content {
  display: grid;
  place-content: center;

  > * {
    grid-area: 1 / 1;
  }

  // logical height: 100%
  block-size: 100%;

  // Carousel-like behavior related
  // grid-auto-flow: column;
  // grid-auto-columns: 100%;
  // scrollbar-width: none;
  // &::-webkit-scrollbar {
  //   display: none;
  // }
}

[role='tabpanel'] {
  pointer-events: none;
  opacity: 0;
  overflow: auto;
  // overscroll-behavior-y: contain;
  transition: opacity var(--duration-200) var(--easing-base);
  width: 100%;
  height: var(--panel-height);
}

[role='tabpanel'].is-open,
[role='tabpanel'].is-active {
  pointer-events: all;
  opacity: 1;
}

[role='tabpanel'] > ul {
  margin-top: var(--lh);
  margin-bottom: calc(var(--lh) * 2);
  padding-left: var(--dim-2);
}
